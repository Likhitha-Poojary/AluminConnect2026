<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Career Center - AlumniConnect</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <header class="header" id="header">
    <div class="brand">
      <i class="fas fa-graduation-cap"></i>
      <span>AlumniConnect</span>
    </div>
    
    <button class="mobile-menu-btn" id="mobileMenuBtn">
      <i class="fas fa-bars"></i>
    </button>
    
    <nav id="mainNav">
      <a href="../index.html" class="nav-home"><i class="fas fa-home"></i> Home</a>
      <a href="directory.html" class="nav-directory"><i class="fas fa-users"></i> Community</a>
      <a href="jobs.html" class="nav-jobs active"><i class="fas fa-briefcase"></i> Jobs</a>
      <a href="events.html" class="nav-events"><i class="fas fa-calendar-alt"></i> Events</a>
      <a href="messages.html" class="nav-messages"><i class="fas fa-comments"></i> Messages</a>
      <a href="dashboard.html" class="nav-dashboard"><i class="fas fa-chart-bar"></i> Dashboard</a>
      <span id="authLinks">
        <a href="login.html" class="btn"><i class="fas fa-sign-in-alt"></i> Login</a>
        <a href="register.html" class="btn primary"><i class="fas fa-user-plus"></i> Register</a>
      </span>
    </nav>
  </header>
  
  <main class="container">
    <div class="card">
      <h3><i class="fas fa-briefcase"></i> Career Center</h3>
      <p class="small">Discover career opportunities and connect with employers from our alumni network</p>
    </div>

    <div style="display:flex;gap:12px;flex-wrap:wrap">
      <div style="flex:1;min-width:300px" class="card">
        <h3><i class="fas fa-plus-circle"></i> Post a Job Opportunity</h3>
        <form id="jobForm">
          <input id="title" placeholder="Job title" required>
          <input id="company" placeholder="Company" required>
          <input id="location" placeholder="Location">
          <textarea id="desc" placeholder="Job description, requirements, and benefits" rows="4"></textarea>
          <div style="margin-top:8px">
            <button class="btn primary" type="submit" style="width:100%"><i class="fas fa-paper-plane"></i> Post Job</button>
          </div>
        </form>
      </div>
      
      <div style="flex:2;min-width:320px">
        <div class="card">
          <h3><i class="fas fa-briefcase"></i> Job Board</h3>
          <p class="small">Browse current opportunities from our alumni community</p>
        </div>
        <div id="jobsList"></div>
      </div>
    </div>
  </main>
  
  <footer class="footer">
    <p>AlumniConnect Career Center &copy; 2025</p>
  </footer>
  
  <script src="../js/app.js"></script>
  <script>
    const jobsList = document.getElementById('jobsList');
    
    function renderJobs(){
      const jobs = App.get('jobs');
      const users = App.get('users');
      
      jobsList.innerHTML = jobs.map(j=>{
        const poster = users.find(u => u.email === j.postedBy) || {name: 'Alumni Member'};
        return `
          <div class="card job-card">
            <h4>${j.title}</h4>
            <div class="meta">
              <i class="fas fa-building"></i> ${j.company} • 
              <i class="fas fa-map-marker-alt"></i> ${j.location||'Remote'}
            </div>
            <p class="small">${j.desc}</p>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
              <small class="small">
                <i class="fas fa-user"></i> Posted by ${poster.name} • 
                <i class="fas fa-clock"></i> ${new Date(j.posted).toLocaleDateString()}
              </small>
              <button class="btn primary apply-btn" data-job="${j.title}">
                <i class="fas fa-paper-plane"></i> Apply Now
              </button>
            </div>
          </div>
        `;
      }).join('') || `
        <div class="card">
          <div style="text-align:center;padding:40px 20px;">
            <i class="fas fa-briefcase" style="font-size:48px;color:var(--muted-light);margin-bottom:16px;"></i>
            <h4>No Jobs Posted Yet</h4>
            <p class="small">Be the first to post a job opportunity!</p>
          </div>
        </div>
      `;
      
      // Add apply button events
      document.querySelectorAll('.apply-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const jobTitle = this.dataset.job;
          const current = App.currentUser();
          if (!current) {
            alert('Please login to apply for jobs');
            window.location.href = 'login.html';
            return;
          }
          alert(`Application for "${jobTitle}" submitted successfully!\n\nIn a real application, this would:\n- Send your profile to the employer\n- Track your application status\n- Enable communication with the recruiter`);
        });
      });
    }
    
    document.getElementById('jobForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      const current = App.currentUser();
      
      if (!current) {
        alert('Please login to post jobs');
        window.location.href = 'login.html';
        return;
      }
      
      const job = { 
        title: document.getElementById('title').value, 
        company: document.getElementById('company').value, 
        location: document.getElementById('location').value, 
        desc: document.getElementById('desc').value, 
        posted: new Date().toISOString(), 
        postedBy: current.email 
      };
      
      App.addJob(job);
      renderJobs();
      e.target.reset();
      alert('Job posted successfully! It is now visible to the community.');
    });
    
    renderJobs();

    // Mobile menu functionality
    document.getElementById('mobileMenuBtn')?.addEventListener('click', function() {
      document.getElementById('mainNav').classList.toggle('show');
    });

    // Update auth links based on login status
    function updateAuthLinks() {
      const current = App.currentUser();
      const authLinks = document.getElementById('authLinks');
      
      if (authLinks) {
        if (current) {
          authLinks.innerHTML = `
            <a href="profile.html" class="btn"><i class="fas fa-user"></i> Profile</a>
            <a href="#" class="btn primary" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a>
          `;
          document.getElementById('logoutBtn')?.addEventListener('click', (e) => {
            e.preventDefault();
            App.logout();
            window.location.href = 'login.html';
          });
        }
      }
    }

    updateAuthLinks();

    // Close mobile menu when clicking outside
    document.addEventListener('click', function(e) {
      const nav = document.getElementById('mainNav');
      const menuBtn = document.getElementById('mobileMenuBtn');
      
      if (nav && menuBtn && !nav.contains(e.target) && !menuBtn.contains(e.target)) {
        nav.classList.remove('show');
      }
    });
  </script>
</body>
</html>